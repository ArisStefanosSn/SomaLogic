#!/bin/bash --login

#SBATCH -J SomaLogic
#SBATCH -o SomaLogic.log
#SBATCH -p long
#SNATCH -a 1-1381%10
#SBATCH -t 4-0:0
#SBATCH --export ALL
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=1
#SBATCH --cpus-per-task=1

export id=$SLURM_ARRAY_TASK_ID

for p in $(awk 'NR==(a-1)*cs+1, NR==a*cs' a=$id cs=10 doc/SomaLogic.list)
do
   echo ${p}
   cd work
   if [ ! -d ${p} ]; then mkdir ${p}; fi
   cd -
   R --no-save -q < QCGWAS.R > work/${p}.log
done
